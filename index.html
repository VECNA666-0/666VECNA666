<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>$VEN – Airdrop • Polygon</title>
  <meta name="description" content="$VEN fan community inspired by the 80s horror vibe. Claim 6,666 $VEN on Polygon. Gas is covered by the team (signature-based claim)." />

  <!-- Fonts: horror title + clean body -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- ethers.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.13.0/ethers.umd.min.js"
          crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <style>
    :root{
      --txt:#e9ecf6; --mut:#a6acc8; --card:rgba(10,12,24,.86);
      --red:#ef4444; --vio:#8b5cf6;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--txt); background:#000;
      font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    }

    /* BACKGROUND: main banner + side Vecna images */
    .backdrop{
      position:fixed; inset:0; z-index:-3;
      background:
        radial-gradient(1200px 600px at 15% -5%, rgba(139,92,246,.25), transparent 50%),
        radial-gradient(1100px 500px at 85% -5%, rgba(239,68,68,.25), transparent 55%),
        #000;
    }
    .banner{
      position:fixed; inset:0; z-index:-2; opacity:.28;
      background:url('https://purple-accused-scorpion-11.mypinata.cloud/ipfs/bafkreibnrglhwfkmatn3q4l2oat3uzry2hzplhk7reeitlf4m3tavshzgq')
                 center/cover no-repeat;
      filter:saturate(1.05) brightness(.9);
    }
    .vecna-side{
      position:fixed; top:0; bottom:0; width:22vw; z-index:-1; pointer-events:none;
      background:url('https://purple-accused-scorpion-11.mypinata.cloud/ipfs/bafybeigsymlccz3emnxiwj7qejm3zpqw75zid62wq4zubrdafxcyuqkn7e')
                 center right / cover no-repeat;
      opacity:.38; filter:saturate(1.1) contrast(1.1);
      mix-blend-mode:screen;
    }
    .vecna-left{ left:0; transform:scaleX(-1); }
    .vecna-right{ right:0; }
    @media (max-width: 1100px){
      .vecna-side{ display:none; }
    }

    .wrap{max-width:1100px; margin:0 auto; padding:20px}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      position:sticky; top:10px; z-index:10;
      padding:12px 14px; border-radius:16px;
      background:linear-gradient(180deg,rgba(12,16,36,.9),rgba(8,10,20,.75));
      border:1px solid rgba(255,255,255,.06); backdrop-filter:blur(6px);
    }
    .brand{display:flex; align-items:center; gap:10px}
    .logo{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,var(--red),var(--vio)); box-shadow:0 10px 30px rgba(239,68,68,.35)}
    .title{font-family:"Creepster", system-ui; font-size:34px; line-height:1; color:var(--red); letter-spacing:.06em; margin:0; text-shadow:0 0 18px rgba(239,68,68,.6)}
    .mut{color:var(--mut)}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .btn{appearance:none;border:0;border-radius:12px;padding:11px 16px;font-weight:800;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;gap:10px}
    .btn-primary{background:linear-gradient(90deg,#f97316,#ef4444);color:#0b1020;box-shadow:0 12px 30px rgba(248,113,113,.35)}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,.12);color:var(--txt)}

    .grid{display:grid;grid-template-columns:1fr; gap:18px; margin-top:16px}
    @media(min-width:1000px){ .grid{grid-template-columns:1.4fr .6fr} }

    .card{border-radius:18px;border:1px solid rgba(255,255,255,.08);background:var(--card);backdrop-filter:blur(6px);padding:18px}
    .big{font-size:30px;font-weight:800;line-height:1.15;margin:8px 0 8px}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:4px 10px;border-radius:999px;background:rgba(2,6,23,.75);border:1px solid rgba(148,163,184,.35);font-size:11px;color:var(--mut);text-transform:uppercase;letter-spacing:.12em}
    .kpi{font-size:22px;font-weight:900}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .side{position:sticky; top:88px; height:max-content}
    .small{font-size:12px}
    .warn{padding:10px 12px;border:1px solid rgba(239,68,68,.4);background:rgba(239,68,68,.1);border-radius:12px}
    footer{margin:30px 0;color:#95a1c8;font-size:12px;text-align:center}
    .joined{margin-top:10px; font-size:12px; color:#9fb1ff; letter-spacing:.04em}
  </style>
</head>
<body>
  <div class="backdrop"></div>
  <div class="banner" aria-hidden="true"></div>
  <div class="vecna-side vecna-left" aria-hidden="true"></div>
  <div class="vecna-side vecna-right" aria-hidden="true"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div>
          <div class="title">$VEN</div>
          <div class="mut">Polygon • chainId 137 • Gas covered by the team</div>
        </div>
      </div>
      <div class="row">
        <button id="connectTop" class="btn btn-ghost">Connect Wallet</button>
        <a href="#claim" class="btn btn-primary">Claim 6,666 $VEN</a>
      </div>
    </header>

    <section class="grid">
      <article class="card">
        <span class="pill">Unofficial fan project • 80s horror ambience</span>
        <h1 class="big">Welcome to the Upside Down. $VEN is a community memecoin where neon nostalgia meets on-chain culture.</h1>
        <p>We’re a fan community inspired by the eerie mood: red fairy lights, fog, synthwave and mysterious portals. $VEN is <strong>not</strong> a security and has no promise of profits. It’s a collectible participation token for quests, raffles, mini-games and fan events. No presale, no VC — just community, on-chain transparency and fair rules.</p>
        <p><strong>Why $VEN?</strong> Active members unlock early drops, OG roles, seasonal “hunts” and perks in partner apps. Devs will get simple widgets to accept $VEN/USDC.</p>
        <p><strong>How to claim?</strong> Signature-based claim: you sign a short message, the team wallet sends tokens to your address. You pay <em>zero</em> gas; your wallet never sends approvals or transfers.</p>
        <div class="warn small">Disclaimer: this is a fan project not affiliated with any rights holders. All original names/images belong to their owners. We only recreate the 80s vibe.</div>
      </article>

      <aside id="claim" class="card side">
        <div class="kpi">Claim 6,666 <span id="symA">VEN</span></div>
        <div class="mut" style="margin-bottom:8px">Signature claim. Team covers gas.</div>
        <div class="row" style="margin-bottom:8px">
          <button id="connectBtn" class="btn btn-ghost">Connect Wallet</button>
          <button id="claimBtn" class="btn btn-primary" disabled>Get 6,666 <span id="symB">VEN</span></button>
        </div>
        <div class="mut small">Token: <span id="tokenAddr" class="mono"></span></div>
        <div class="mut small">You: <span id="me" class="mono">—</span></div>
        <div id="status" class="mut" style="margin-top:8px"></div>
        <div class="joined">Already connected: <strong>1,350 users</strong></div>
        <hr style="opacity:.12;margin:12px 0">
        <div class="row">
          <a id="scan" class="mut small" target="_blank" rel="noopener">Polygonscan</a>
          <a id="dex" class="mut small" target="_blank" rel="noopener">DEXScreener</a>
          <a id="qs" class="mut small" target="_blank" rel="noopener">QuickSwap</a>
        </div>
        <div class="row" style="margin-top:8px">
          <button id="addMM" class="btn btn-ghost">Add $VEN to MetaMask</button>
        </div>
      </aside>
    </section>

    <section class="card">
      <h2 style="margin:0 0 10px;font-family:Creepster,system-ui;letter-spacing:.04em;color:var(--red)">Lore</h2>
      <p>Somewhere between radio static and blinking lights a portal opens on Polygon. Legends say $VEN was born when someone pressed “REC” on an old tape deck and captured the breath of the Upside Down. We call it “the Signal”. Track the on-chain clues, hunt for artifacts, and join the cult of neon.</p>
    </section>

    <footer>© <span id="year"></span> $VEN Fan Community. This is not financial advice. DYOR.</footer>
  </div>

  <script>
  (function(){
    // ===== Config
    const TOKEN_ADDRESS = '0xfffB251755865a815C7817e5ab9ABbe1FEf71435'; // VEN (Polygon)
    const CHAIN_ID = 137;
    const PER_WALLET = 6666;

    // Your Render backend endpoint
    const BACKEND_URL = "https://six06vecna666-xd8l.onrender.com/api/claim";

    // ===== UI refs
    const $ = (id)=>document.getElementById(id);
    const connectBtn = $('connectBtn');
    const connectTop = $('connectTop');
    const claimBtn   = $('claimBtn');
    const statusEl   = $('status');
    const meEl       = $('me');
    const tokenAddrEl= $('tokenAddr');
    const symA = $('symA'); const symB = $('symB');
    const scan = $('scan'); const dex = $('dex'); const qs = $('qs');

    tokenAddrEl.textContent = TOKEN_ADDRESS;
    scan.href = `https://polygonscan.com/token/${TOKEN_ADDRESS}`;
    dex.href  = `https://dexscreener.com/polygon/${TOKEN_ADDRESS}`;
    qs.href   = `https://quickswap.exchange/#/swap?currency0=USDC&currency1=${TOKEN_ADDRESS}`;
    $('year').textContent = new Date().getFullYear();

    // ===== Token meta
    let providerRead = new ethers.JsonRpcProvider('https://polygon-rpc.com');
    let symbol = 'VEN', decimals = 18;
    (async()=>{
      try{
        const erc = new ethers.Contract(
          TOKEN_ADDRESS,
          ['function symbol() view returns (string)','function decimals() view returns (uint8)'],
          providerRead
        );
        symbol = await erc.symbol().catch(()=>symbol);
        decimals = await erc.decimals().catch(()=>decimals);
      }catch(e){}
      symA.textContent = symbol; symB.textContent = symbol;
    })();

    // ===== Web3 connect
    let provider, signer, account;
    async function connect(){
      if(!window.ethereum){ alert('Install MetaMask or a compatible wallet'); return; }
      provider = new ethers.BrowserProvider(window.ethereum);
      await provider.send('eth_requestAccounts', []);
      const net = await provider.getNetwork();
      if(Number(net.chainId)!==CHAIN_ID){
        try{
          await window.ethereum.request({ method:'wallet_switchEthereumChain', params:[{ chainId:'0x89' }] });
        }catch(e){
          if(e.code===4902){
            await window.ethereum.request({
              method:'wallet_addEthereumChain',
              params:[{ chainId:'0x89', chainName:'Polygon', nativeCurrency:{name:'POL',symbol:'POL',decimals:18},
                        rpcUrls:['https://polygon-rpc.com'], blockExplorerUrls:['https://polygonscan.com'] }]
            });
          } else { statusEl.textContent = 'Please switch to Polygon (137)'; return; }
        }
      }
      signer = await provider.getSigner();
      account = await signer.getAddress();
      meEl.textContent = account;
      claimBtn.disabled = false;
      statusEl.textContent = 'Ready to claim';
    }
    connectBtn.onclick = connect; connectTop.onclick = connect;

    // ===== Add token to MetaMask
    $('addMM').onclick = async()=>{
      if(!window.ethereum){ alert('MetaMask not found'); return; }
      try{
        await window.ethereum.request({
          method:'wallet_watchAsset',
          params:{ type:'ERC20', options:{ address:TOKEN_ADDRESS, symbol, decimals, image:location.origin+'/icon.png' } }
        });
      }catch(e){ console.warn(e); }
    };

    // ===== Claim (EIP-712 signature -> backend)
    claimBtn.onclick = async()=>{
      if(!signer||!account){ statusEl.textContent = 'Connect your wallet'; return; }
      statusEl.textContent = 'Sign the claim…';
      const now = Math.floor(Date.now()/1000);
      const msg = {
        claimer: account,
        amount: ethers.parseUnits(String(PER_WALLET), decimals).toString(),
        nonce: Math.floor(Math.random()*1e9),
        deadline: now + 15*60
      };
      const domain = { name:'VEN Airdrop', version:'1', chainId: CHAIN_ID };
      const types  = { Claim:[
        {name:'claimer', type:'address'},
        {name:'amount',  type:'uint256'},
        {name:'nonce',   type:'uint256'},
        {name:'deadline',type:'uint256'}
      ]};
      let sig; try{ sig = await signer.signTypedData(domain, types, msg); }
      catch(e){ statusEl.textContent='Signature cancelled'; return; }

      statusEl.textContent = 'Sending to server…';
      try{
        const r = await fetch(BACKEND_URL, {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ token:TOKEN_ADDRESS, ...msg, signature:sig })
        });
        const data = await r.json().catch(()=>({}));
        if(!r.ok){ statusEl.textContent = 'Error: '+(data.error||r.statusText); return; }
        statusEl.textContent = 'Success! Tx: '+(data.txHash||'submitted');
        claimBtn.disabled = true;
      }catch(e){ statusEl.textContent = 'Server unavailable'; }
    };
  })();
  </script>
</body>
</html>
